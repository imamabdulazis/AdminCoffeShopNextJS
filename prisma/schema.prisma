generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model category {
  id          String    @id @db.Uuid
  name        String?   @db.VarChar
  description String?
  created_at  DateTime? @db.Timestamp(6)
  updated_at  DateTime? @db.Timestamp(6)
  deleted_at  DateTime? @db.Timestamp(6)
  drink       drink[]
}

model device {
  id             String         @id @db.Uuid
  user_id        String?        @db.Uuid
  fcm_token      String?        @db.VarChar
  manufacture    String?        @db.VarChar
  system_version String?        @db.VarChar
  system_os      String?        @db.VarChar
  phone_id       String?        @db.VarChar
  os_name        String?        @db.VarChar
  app_version    String?        @db.VarChar
  created_at     DateTime?      @db.Timestamp(6)
  updated_at     DateTime?      @db.Timestamp(6)
  deleted_at     DateTime?      @db.Timestamp(6)
  users          users?         @relation(fields: [user_id], references: [id])
  notification   notification[]
}

model drink {
  id          String     @id @db.Uuid
  category_id String?    @db.Uuid
  name        String?    @db.VarChar
  description String?
  image_url   String?    @db.VarChar
  price       String?    @db.VarChar
  stock       Int?
  created_at  DateTime?  @db.Timestamp(6)
  updated_at  DateTime?  @db.Timestamp(6)
  deleted_at  DateTime?  @db.Timestamp(6)
  category    category?  @relation(fields: [category_id], references: [id])
  cart        cart[]
  favorite    favorite[]
  orders      orders[]
}

model notification {
  id         String    @id @db.Uuid
  device_id  String?   @db.Uuid
  title      String?   @db.VarChar
  body       String?   @db.VarChar
  event      String?   @db.VarChar
  created_at DateTime? @db.Timestamp(6)
  updated_at DateTime? @db.Timestamp(6)
  deleted_at DateTime? @db.Timestamp(6)
  device     device?   @relation(fields: [device_id], references: [id])
}

model payment_method {
  id           String    @id @db.Uuid
  payment_type String?   @db.VarChar
  description  String?
  created_at   DateTime? @db.Timestamp(6)
  updated_at   DateTime? @db.Timestamp(6)
  deleted_at   DateTime? @db.Timestamp(6)
  image_url    String?
  orders       orders[]
}

model report {
  id          String    @id @db.Uuid
  date_report DateTime? @db.Timestamp(6)
  order_id    String?   @db.Uuid
  created_at  DateTime? @db.Timestamp(6)
  updated_at  DateTime? @db.Timestamp(6)
  deleted_at  DateTime? @db.Timestamp(6)
  orders      orders?   @relation(fields: [order_id], references: [id])
}

model users {
  id          String     @id @db.Uuid
  name        String?    @db.VarChar
  username    String?    @db.VarChar
  email       String?    @db.VarChar
  password    String?    @db.VarChar
  image_url   String?    @db.VarChar
  telp_number String?    @db.VarChar
  previlage   String?    @db.VarChar
  created_at  DateTime?  @db.Timestamp(6)
  updated_at  DateTime?  @db.Timestamp(6)
  deleted_at  DateTime?  @db.Timestamp(6)
  cart        cart[]
  device      device[]
  favorite    favorite[]
  orders      orders[]
}

model orders {
  id                String          @id @db.Uuid
  no_transaction    String?         @db.VarChar
  user_id           String?         @db.Uuid
  payment_method_id String?         @db.Uuid
  drink_id          String?         @db.Uuid
  order_status      String?         @db.VarChar
  amount            Int?
  discount          Int?
  total             Int?
  payment_status    String?         @db.VarChar
  transaction_token String?         @db.VarChar
  created_at        DateTime?       @db.Timestamp(6)
  updated_at        DateTime?       @db.Timestamp(6)
  deleted_at        DateTime?       @db.Timestamp(6)
  deeplink_redirect String?
  generate_qr_code  String?
  get_status        String?
  post_cancel_order String?
  drink             drink?          @relation(fields: [drink_id], references: [id])
  payment_method    payment_method? @relation(fields: [payment_method_id], references: [id])
  users             users?          @relation(fields: [user_id], references: [id])
  report            report[]
}

model cart {
  id         String    @id @db.Uuid
  drink_id   String?   @db.Uuid
  user_id    String?   @db.Uuid
  amount     Int?
  created_at DateTime? @db.Timestamp(6)
  updated_at DateTime? @db.Timestamp(6)
  deleted_at DateTime? @db.Timestamp(6)
  drink      drink?    @relation(fields: [drink_id], references: [id])
  users      users?    @relation(fields: [user_id], references: [id])
}

model favorite {
  id         String    @id @db.Uuid
  drink_id   String?   @db.Uuid
  user_id    String?   @db.Uuid
  amount     Int?
  created_at DateTime? @db.Timestamp(6)
  updated_at DateTime? @db.Timestamp(6)
  deleted_at DateTime? @db.Timestamp(6)
  drink      drink?    @relation(fields: [drink_id], references: [id])
  users      users?    @relation(fields: [user_id], references: [id])
}
